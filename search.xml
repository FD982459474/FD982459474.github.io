<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Jenkins权限管理</title>
      <link href="/2022/07/31/%E5%8D%9A%E5%AE%A2/jenkins%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90-%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"/>
      <url>/2022/07/31/%E5%8D%9A%E5%AE%A2/jenkins%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90-%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="用户权限管理"><a href="#用户权限管理" class="headerlink" title="用户权限管理"></a>用户权限管理</h1><h2 id="安装-Role-based-Authorization-Strategy"><a href="#安装-Role-based-Authorization-Strategy" class="headerlink" title="安装 Role-based Authorization Strategy"></a>安装 Role-based Authorization Strategy</h2><p>Manage Plugins -&gt; 可选插件 -&gt;搜索Role-based Authorization Strategy</p><h2 id="配置全局-Configure-Global-Security"><a href="#配置全局-Configure-Global-Security" class="headerlink" title="配置全局 Configure Global Security"></a>配置全局 Configure Global Security</h2><p>Configure Global Security<br>授权策略 选择Role-based Strategy<br><img src="/../../img/Jenkins/4.png"></p><h2 id="新建角色-Manage-User"><a href="#新建角色-Manage-User" class="headerlink" title="新建角色 Manage User"></a>新建角色 Manage User</h2><p><img src="/../../img/Jenkins/8.png"></p><h2 id="管理角色-Manage-and-Assign-Roles"><a href="#管理角色-Manage-and-Assign-Roles" class="headerlink" title="管理角色 Manage and Assign Roles"></a>管理角色 Manage and Assign Roles</h2><p>Manage Rolse 管理角色<br>全局角色 Global roles<br><img src="/../../img/Jenkins/6.png"><br>项目角色 Project roles<br><img src="/../../img/Jenkins/5.png"><br>正则配置<br><img src="/../../img/Jenkins/7.png"><br>Assign Roles 分配角色<br><img src="/../../img/Jenkins/9.png"></p><h1 id="凭证管理"><a href="#凭证管理" class="headerlink" title="凭证管理"></a>凭证管理</h1><h2 id="安装Credentials-Binding插件"><a href="#安装Credentials-Binding插件" class="headerlink" title="安装Credentials Binding插件"></a>安装Credentials Binding插件</h2><p>凭证管理<br><img src="/../../img/Jenkins/10.png"></p><h2 id="GitLab拉取代码配置凭证实例"><a href="#GitLab拉取代码配置凭证实例" class="headerlink" title="GitLab拉取代码配置凭证实例"></a>GitLab拉取代码配置凭证实例</h2><h3 id="Jenkins安装插件-Git"><a href="#Jenkins安装插件-Git" class="headerlink" title="Jenkins安装插件 Git"></a>Jenkins安装插件 Git</h3><h3 id="服务器安装-Git-yum-install-git-y"><a href="#服务器安装-Git-yum-install-git-y" class="headerlink" title="服务器安装 Git yum install git -y"></a>服务器安装 Git yum install git -y</h3><ul><li><h3 id="Jenkins配置用户名密码凭证"><a href="#Jenkins配置用户名密码凭证" class="headerlink" title="Jenkins配置用户名密码凭证"></a>Jenkins配置用户名密码凭证</h3><img src="/../../img/Jenkins/11.png"></li><li><h4 id="项目配置中配置"><a href="#项目配置中配置" class="headerlink" title="项目配置中配置"></a>项目配置中配置</h4><img src="/../../img/Jenkins/12.png"></li><li><h4 id="拉代码进行测试-可进相应服务器查看"><a href="#拉代码进行测试-可进相应服务器查看" class="headerlink" title="拉代码进行测试 可进相应服务器查看"></a>拉代码进行测试 可进相应服务器查看</h4><img src="/../../img/Jenkins/13.png"></li><li><h3 id="Jenkins-SSH配置"><a href="#Jenkins-SSH配置" class="headerlink" title="Jenkins SSH配置"></a>Jenkins SSH配置</h3><img src="/../../img/Jenkins/14.png"></li><li><h4 id="生成公钥私钥"><a href="#生成公钥私钥" class="headerlink" title="生成公钥私钥"></a>生成公钥私钥</h4><ul><li>ssh-keygen -t rsa</li></ul></li><li><h4 id="GitLab-服务器保存公钥"><a href="#GitLab-服务器保存公钥" class="headerlink" title="GitLab 服务器保存公钥"></a>GitLab 服务器保存公钥</h4><img src="/../../img/Jenkins/15.png"></li><li><h4 id="Jenkins-添加私钥"><a href="#Jenkins-添加私钥" class="headerlink" title="Jenkins 添加私钥"></a>Jenkins 添加私钥</h4><img src="/../../img/Jenkins/16.png"></li><li><h4 id="项目配置中配置-1"><a href="#项目配置中配置-1" class="headerlink" title="项目配置中配置"></a>项目配置中配置</h4><img src="/../../img/Jenkins/17.png"></li><li><h4 id="拉代码进行测试-可进相应服务器查看-1"><a href="#拉代码进行测试-可进相应服务器查看-1" class="headerlink" title="拉代码进行测试 可进相应服务器查看"></a>拉代码进行测试 可进相应服务器查看</h4></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins安装</title>
      <link href="/2022/07/30/%E5%8D%9A%E5%AE%A2/Jenkins%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90-%E5%AE%89%E8%A3%85/"/>
      <url>/2022/07/30/%E5%8D%9A%E5%AE%A2/Jenkins%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90-%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h3 id="JDK的安装"><a href="#JDK的安装" class="headerlink" title="JDK的安装"></a>JDK的安装</h3><p>yum install java-1.8.0-openjdk* -y<br>安装目录为: &#x2F;usr&#x2F;lib&#x2F;jvm</p><h3 id="获取Jenkins包"><a href="#获取Jenkins包" class="headerlink" title="获取Jenkins包"></a>获取Jenkins包</h3><p>rpm 下载: <a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/">https://mirrors.tuna.tsinghua.edu.cn/jenkins/</a><br>rpm - i jenkins-2.303.1-1.1.noarch.rpm</p><ul><li>daemonize 被 jenkins-2.303.1-1.1.noarch 需要<ul><li>yum -y install epel-release</li><li>yum -y install daemonize</li></ul></li></ul><p>vim &#x2F;etc&#x2F;sysconfig&#x2F;jenkins</p><ul><li>JENKINS_USER&#x3D;’root’</li><li>JENKINS_PORT&#x3D;’8888’</li></ul><p>systemctl start jenkins</p><ul><li>若无法访问 关闭防火墙<ul><li>systemctl stop firewalld</li></ul></li></ul><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><p><img src="/../../img/Jenkins/1.png"><br>832a7f0b18b24b2bba7a8cb82fd2c70d<br>第一次先跳过插件安装 选全无<br>创建一个管理员</p><ul><li>username:xwj</li><li>password:xwj123456</li></ul><h3 id="插件管理"><a href="#插件管理" class="headerlink" title="插件管理"></a>插件管理</h3><p>修改Jenkins插件下载地址<br>jenkins -&gt; Manage jenkins -&gt; Manage Plugins,点击Available</p><p>查看地址文件下载目录:  cd &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;updates    default.json</p><p>替换插件下载源:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo sed -i &#x27;s/http:\/\/updates.jenkins-ci.org\/download/https:\/\/mirrors.tuna.tsinghua.edu.cn\/jenkins/g&#x27; default.json &amp;&amp; sudo sed -i &#x27;s/http:\/\/www.google.com/https:\/\/www.baidu.com/g&#x27; default.json</span><br></pre></td></tr></table></figure><p>最后 Manage Plugins点击Advanced 把Update Site改为国内插件下载地址<br><a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p><p>下载中文汉化插件<br>jenkins-&gt; Manage jenkins -&gt; Manage Plugins 点击Advanced 搜索”Chinese”<br><img src="/../../img/Jenkins/2.png"><br>汉化后<br><img src="/../../img/Jenkins/3.png"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitLib安装</title>
      <link href="/2022/07/30/%E5%8D%9A%E5%AE%A2/GitLab%E5%AE%89%E8%A3%85/"/>
      <url>/2022/07/30/%E5%8D%9A%E5%AE%A2/GitLab%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="GitLib安装"><a href="#GitLib安装" class="headerlink" title="GitLib安装"></a>GitLib安装</h2><ul><li>安装相关依赖<br>yum -y install policycoreutils openssh-server openssh-clients postfix</li><li>启动ssh服务并设置为开机启动<br>systemctl enable sshd &amp;&amp; systemctl start sshd</li><li>设置postfix开机启动,,postfix支持gitlab发信功能<br>systemctl enable postfix &amp;&amp; systemctl start postfix</li><li>开放ssh以及http服务,然后重新加载防火墙列表<ul><li>firewall-cmd –add-service&#x3D;ssh –permanent</li><li>firewall-cmd –add-service&#x3D;http –permanent</li><li>firewall-cmd –reload</li><li>关闭防火墙则不需要做这个操作</li></ul></li><li>下载gitlab包并且安装<ul><li>wget <a href="https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-12.4.2-ce.0.el7.x86_64.rpm">https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-12.4.2-ce.0.el7.x86_64.rpm</a></li><li>rpm -i gitlab-ce-12.4.2-ce.0.el7.x86_64.rpm</li></ul></li><li>修改gitlab访问地址和端口,改为82<ul><li>vim &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb</li><li>external_url”<a href="http://192.168.31.100:82&quot;">http://192.168.31.100:82&quot;</a></li><li>nginx[‘listen_port’] &#x3D; 82</li></ul></li><li>重新配置及启动gitlab<ul><li>gitlab-ctl reconfigure (耗时较久)</li><li>gitlab-ctl restart</li></ul></li><li>把端口加入到防火墙内(关闭防火墙则不需要做这个操作)<ul><li>firewall-cmd –zone&#x3D;public –add-port&#x3D;82&#x2F;tcp –permanent</li><li>firewall-cmd –reload</li></ul></li><li>登录 修改密码<ul><li>192.168.31.100:82</li><li>修改密码<ul><li>root123456</li></ul></li><li>重登录<ul><li>root</li><li>root123456</li></ul></li></ul></li></ul><h2 id="添加组-创建用户-创建项目"><a href="#添加组-创建用户-创建项目" class="headerlink" title="添加组,创建用户,创建项目"></a>添加组,创建用户,创建项目</h2><ul><li>先创建组</li><li>再创建项目</li><li>新建用户<ul><li>点击扳手 再点击User 再点击New User</li></ul></li><li>修改用户<ul><li>点击edit 修改密码</li><li>username xwj password xwj123456</li><li>点击Groups 选择项目 点击Members<br><img src="/../../img/GitLab%E5%88%9D%E5%A7%8B%E5%8C%96/1.png"><br><img src="/../../img/GitLab%E5%88%9D%E5%A7%8B%E5%8C%96/2.png"><br><img src="/../../img/GitLab%E5%88%9D%E5%A7%8B%E5%8C%96/3.png"><br><img src="/../../img/GitLab%E5%88%9D%E5%A7%8B%E5%8C%96/4.png"></li></ul></li><li>切换刚才创建的用户进行登录</li></ul><h2 id="源码上传到GitLab仓库"><a href="#源码上传到GitLab仓库" class="headerlink" title="源码上传到GitLab仓库"></a>源码上传到GitLab仓库</h2><ul><li>先在本地初始化一个仓库 git init</li><li>添加代码</li><li>提交git库  git remote add origin <a href="http://192.168.31.100:82/g109/web_demo.git">http://192.168.31.100:82/g109/web_demo.git</a></li><li>添加文件夹所有文件  git add .</li><li>提交代码  git commit -m “xxxx”</li><li>推送代码  git push -u origin master<ul><li>首次时会出现要输入用户名密码的情况 如图<br><img src="/../../img/GitLab%E5%88%9D%E5%A7%8B%E5%8C%96/5.png"></li><li>后续改动则只需要<ul><li>git add .</li><li>git commit -m “xxxx”</li><li>git push</li></ul></li></ul></li></ul><h2 id="小坑"><a href="#小坑" class="headerlink" title="小坑"></a>小坑</h2><ul><li>policycoreutils-python 被 gitlab-ce-12.4.2-ce.0.el7.x86_64 需要<ul><li>yum install policycoreutils-python -y</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7初始化</title>
      <link href="/2022/07/30/%E5%8D%9A%E5%AE%A2/CentOS%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
      <url>/2022/07/30/%E5%8D%9A%E5%AE%A2/CentOS%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><h3 id="yum更新"><a href="#yum更新" class="headerlink" title="yum更新"></a>yum更新</h3><pre><code>yum update -y</code></pre><h3 id="安装Tab-补齐"><a href="#安装Tab-补齐" class="headerlink" title="安装Tab 补齐"></a>安装Tab 补齐</h3><ul><li><p>检查一下系统有没有安装bash-completion包。</p><p>  rpm -lq bash-completion</p></li><li><p>yum查找一下</p><p>  yum list | grep bash</p></li><li><p>yum安装bash-completion包</p><p>  yum -y install bash-completion</p></li><li><p>reboot 重启生效</p><p>  reboot</p></li></ul><h3 id="关闭SELINUX"><a href="#关闭SELINUX" class="headerlink" title="关闭SELINUX"></a>关闭SELINUX</h3><p>vi &#x2F;etc&#x2F;selinux&#x2F;config </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># This file controls the state of SELinux on the system.</span><br><span class="line"># SELINUX= can take one of these three values:</span><br><span class="line">#     enforcing - SELinux security policy is enforced.</span><br><span class="line">#     permissive - SELinux prints warnings instead of enforcing.</span><br><span class="line">#     disabled - No SELinux policy is loaded.</span><br><span class="line">#SELINUX=enforcing</span><br><span class="line">SELINUX=disable</span><br><span class="line"># SELINUXTYPE= can take one of three two values:</span><br><span class="line">#     targeted - Targeted processes are protected,</span><br><span class="line">#     minimum - Modification of targeted policy. Only selected processes are protected.</span><br><span class="line">#     mls - Multi Level Security protection.</span><br><span class="line">SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure><p>将SELINUX&#x3D;enforcing 改为 SELINUX&#x3D;disable</p><h3 id="更改yum源"><a href="#更改yum源" class="headerlink" title="更改yum源"></a>更改yum源</h3><ul><li>备份所有<ul><li>mkdir &#x2F;etc&#x2F;yum.repos.d&#x2F;bak</li><li>mv &#x2F;etc&#x2F;yum.repos.d&#x2F;* &#x2F;etc&#x2F;yum.repos.d&#x2F;bak</li></ul></li><li>下载新的CentOS-Base.repo 到&#x2F;etc&#x2F;yum.repos.d&#x2F;<ul><li>wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-7.repo">http://mirrors.aliyun.com/repo/Centos-7.repo</a></li><li>或者</li><li>curl -o &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-7.repo">http://mirrors.aliyun.com/repo/Centos-7.repo</a></li></ul></li><li>配置epel源<ul><li>wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;epel.repo <a href="http://mirrors.aliyun.com/repo/epel-7.repo">http://mirrors.aliyun.com/repo/epel-7.repo</a></li></ul></li><li>运行yum makecache生成缓存<ul><li>yum clean all</li><li>yum makecache</li><li>yum repolist</li></ul></li><li>最小化安装没有ifconfig命令解决方法<ul><li>yum search ifconfig</li><li>yum install -y net-tools</li><li>yum provides ifconfig</li></ul></li></ul><h3 id="默认打开vim增加行号"><a href="#默认打开vim增加行号" class="headerlink" title="默认打开vim增加行号"></a>默认打开vim增加行号</h3><ul><li>创建一个.vimrc文件 vi ~&#x2F;.vimrc</li><li>添加内容  set number</li></ul><h2 id="常用的依赖"><a href="#常用的依赖" class="headerlink" title="常用的依赖"></a>常用的依赖</h2><table><thead><tr><th>组件</th><th>功能</th></tr></thead><tbody><tr><td>gcc glibc gcc-c++ make cmake</td><td>编译器，编译安装的时候会用到</td></tr><tr><td>net-tools</td><td>#Linux内核中配置网络功能的工具</td></tr><tr><td>screen</td><td>#用于命令行终端切换</td></tr><tr><td>vim</td><td>#编辑器</td></tr><tr><td>lrzsz</td><td>#拖动上传，sz下载</td></tr><tr><td>tree</td><td>#树形目录</td></tr><tr><td>dos2unix</td><td>#Windows格式文件转换为Unix、Linux格式的实用命令</td></tr><tr><td>lsof</td><td>#列出当前系统打开文件的工具</td></tr><tr><td>tcpdump</td><td>#抓包工具</td></tr><tr><td>bash-completion</td><td>#自动补全功能增强</td></tr><tr><td>ntp</td><td>#同步网络事件</td></tr><tr><td>psmisc</td><td>#帮助管理&#x2F;proc目录的程序</td></tr></tbody></table><ul><li>分开复制<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install gcc</span><br><span class="line">yum -y install glibc </span><br><span class="line">yum -y install gcc-c++ </span><br><span class="line">yum -y install make </span><br><span class="line">yum -y install cmake</span><br><span class="line">yum -y install net-tools</span><br><span class="line">yum -y install screen</span><br><span class="line">yum -y install vim</span><br><span class="line">yum -y install lrzsz</span><br><span class="line">yum -y install tree</span><br><span class="line">yum -y install dos2unix</span><br><span class="line">yum -y install lsof</span><br><span class="line">yum -y install tcpdump</span><br><span class="line">yum -y install bash-completion</span><br><span class="line">yum -y install wget</span><br><span class="line">yum -y install ntp</span><br><span class="line">yum -y install setuptool</span><br><span class="line">yum -y install psmisc</span><br><span class="line">yum -y install openssl</span><br><span class="line">yum -y install openssl-devel</span><br><span class="line">yum -y install bind-utils</span><br><span class="line">yum -y install traceroute</span><br><span class="line">yum -y install epel-release</span><br><span class="line">yum -y install bash-completion bash-completion-extras</span><br></pre></td></tr></table></figure></li><li>一键安装<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install gcc glibc gcc-c++ make cmake net-tools screen vim lrzsz tree dos2unix lsof tcpdump bash-completion wget ntp setuptool psmisc openssl openssl-devel bind-utils traceroute epel-release bash-completion bash-completion-extras bash-completion</span><br></pre></td></tr></table></figure></li></ul><h2 id="更改ssh默认端口"><a href="#更改ssh默认端口" class="headerlink" title="更改ssh默认端口"></a>更改ssh默认端口</h2><ul><li>添加ssh端口 vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost /]# vim /etc/ssh/sshd_config</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">      <span class="variable">$OpenBSD</span>: sshd_config,v 1.100 2016/08/15 12:32:04 naddy Exp $</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is the sshd server system-wide configuration file.  See</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sshd_config(5) <span class="keyword">for</span> more information.</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This sshd was compiled with PATH=/usr/local/bin:/usr/bin</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The strategy used <span class="keyword">for</span> options <span class="keyword">in</span> the default sshd_config shipped with</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OpenSSH is to specify options with their default value <span class="built_in">where</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">possible, but leave them commented.  Uncommented options override the</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">default value.</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">If you want to change the port on a SELinux system, you have to tell</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SELinux about this change.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">semanage port -a -t ssh_port_t -p tcp <span class="comment">#PORTNUMBER</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">Port 22</span></span><br><span class="line">Port 2022</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">AddressFamily any</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ListenAddress 0.0.0.0</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ListenAddress ::</span></span><br></pre></td></tr></table></figure><ul><li>然后重启ssh服务  systemctl restart sshd.service</li></ul></li><li>开启防火墙<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动防火墙</span></span><br><span class="line">systemctl start firewalld.service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">关闭防火墙</span></span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启防火墙</span></span><br><span class="line">systemctl restart firewalld.service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看防火墙状态</span></span><br><span class="line">systemctl status firewalld.service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置开机启动防火墙</span></span><br><span class="line">systemctl enable firewalld.service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置开机不启动防火墙</span></span><br><span class="line">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure></li><li>添加防火墙规则<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=2022/tcp --permanent　　</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">说明:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开放2022端口</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">–zone 作用域</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">–add-port=2022/tcp <span class="comment">#添加端口，格式为：端口/通讯协议</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">–permanent 永久生效，没有此参数重启后失效</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加完毕过后重新读取防火墙规则或者重启防火墙，规则才生效</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重新读取防火墙规则</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">或者重启防火墙：</span></span><br><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure></li><li>删除默认的22端口<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">[root@localhost /]# vim /etc/ssh/sshd_config</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">      <span class="variable">$OpenBSD</span>: sshd_config,v 1.100 2016/08/15 12:32:04 naddy Exp $</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is the sshd server system-wide configuration file.  See</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sshd_config(5) <span class="keyword">for</span> more information.</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This sshd was compiled with PATH=/usr/local/bin:/usr/bin</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The strategy used <span class="keyword">for</span> options <span class="keyword">in</span> the default sshd_config shipped with</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OpenSSH is to specify options with their default value <span class="built_in">where</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">possible, but leave them commented.  Uncommented options override the</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">default value.</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">If you want to change the port on a SELinux system, you have to tell</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SELinux about this change.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">semanage port -a -t ssh_port_t -p tcp <span class="comment">#PORTNUMBER</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">Port 2022</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">AddressFamily any</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ListenAddress 0.0.0.0</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ListenAddress :</span></span><br></pre></td></tr></table></figure><ul><li>systemctl restart sshd.service</li></ul></li></ul><h2 id="问题收录"><a href="#问题收录" class="headerlink" title="问题收录"></a>问题收录</h2><ul><li>“E212 can‘t open file for writing”报错<ul><li>权限不够 使用sudo打开</li></ul></li><li>E37: No write since last change (add ! to override)<ul><li>q!退出</li></ul></li><li>-bash: locate: 未找到命令<ul><li>yum install mlocate</li><li>updatedb</li></ul></li><li>-bash: wget: 未找到命令<ul><li>服务器本身没有自带安装wget，但一般很少有这种情况出现。</li><li>服务器自带的wget版本过低，无法通过wget命令去安装其它应用。<ul><li>查看服务器是否安装wget  rpm -qa|grep ‘wget’</li><li>卸载wget yum remove wget</li><li>下载wget的rpm安装包 <a href="http://mirrors.163.com/centos/7/os/x86_64/Packages/">http://mirrors.163.com/centos/7/os/x86_64/Packages/</a></li><li>在&#x2F;usr&#x2F;local下创建wget目录，xftp工具将rpm文件上传至wget目录下</li><li>rpm -ivh wget-1.14-18.el7_6.1.x86_64.rpm</li></ul></li></ul></li><li>解决ssh链接缓慢的问题<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sed -i &#x27;s/^ *GSSAPIAuthentication yes/GSSAPIAuthentication no/g&#x27; /etc/ssh/sshd_config</span><br><span class="line">cat /etc/ssh/sshd_config | grep &quot;^GSSAPIAuthentication&quot;</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s/^ *#UseDNS yes/UseDNS no/g&#x27; /etc/ssh/sshd_config </span><br><span class="line">cat /etc/ssh/sshd_config | grep &quot;UseDNS&quot;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7安装与网络解决</title>
      <link href="/2022/07/30/%E5%8D%9A%E5%AE%A2/CentOS/"/>
      <url>/2022/07/30/%E5%8D%9A%E5%AE%A2/CentOS/</url>
      
        <content type="html"><![CDATA[<h2 id="CentOS安装"><a href="#CentOS安装" class="headerlink" title="CentOS安装"></a>CentOS安装</h2><h3 id="镜像下载"><a href="#镜像下载" class="headerlink" title="镜像下载"></a>镜像下载</h3><p>选择阿里云镜像进行OS下载: <a href="http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/">http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/</a></p><p>选择DVD.ios文件进行下载</p><h3 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h3><ul><li><p>安装系统很简单,一直下一步就可以 注意切换一下盘符即可</p></li><li><p>进入系统界面后,点一下磁盘检查,之后可以直接下一步</p></li><li><p>配置一下root账户密码即可</p></li><li><p>配置完成后即可重启进入系统</p></li><li><p>输入用户名和密码后正式进入系统</p></li></ul><h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">查看防火墙状态</span><br><span class="line">systemctl status firewall.service</span><br><span class="line"></span><br><span class="line">关闭防火墙</span><br><span class="line">systemctl stop firewall.service</span><br><span class="line"></span><br><span class="line">永久关闭防火墙</span><br><span class="line">systemctl disable firewall.service</span><br></pre></td></tr></table></figure><h3 id="配置网路"><a href="#配置网路" class="headerlink" title="配置网路"></a>配置网路</h3><ul><li>首先查看VMware自动设置的网段和网关<ul><li>点击编辑 虚拟网路编辑器 找到VMware8</li><li><img src="/../../img/CentOS7%E6%88%AA%E5%9B%BE/1.png"></li><li><strong>记下对应的子网IP,子网掩码,点击NAT设置</strong></li><li><img src="/../../img/CentOS%E6%88%AA%E5%9B%BE/../CentOS7%E6%88%AA%E5%9B%BE/2.png"></li><li><strong>注意要与本机的网关网段一样 但不要和子网IP和本机网关重复</strong></li><li>设置好后记下网关IP,子掩码,子网IP和本机网关</li></ul></li><li>在系统内 <strong>(大小写不可忽略)</strong><ul><li>输入指令: vi &#x2F;etc&#x2F;sysonfig&#x2F;network-scripts&#x2F;ifcfg-ens33</li><li><img src="/../../img/CentOS7%E6%88%AA%E5%9B%BE/3.png"></li><li>设置以下几个东西 i进入vi插入模式  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">设置获取静态IP</span><br><span class="line">BOOTPROTO = static</span><br><span class="line">设置网路开启状态</span><br><span class="line">ONBOOT = yes</span><br><span class="line">设置静态IP 注意这里的IP不要和网关和子网IP重复,但网段要相同,这里应该设置为192.168.31.3-255,但不要和本机IPV4地址重复</span><br><span class="line">IPADDR = 192.168.31.3</span><br><span class="line">设置子掩码 为网路编辑器中查到的子掩码</span><br><span class="line">NETMASK = 255.255.255.0</span><br><span class="line">设置子掩码位数长度</span><br><span class="line">PREFIX = 24</span><br><span class="line">设置网关 为网路编辑器中查到的网关IP</span><br><span class="line">GATEWAY = 192.168.31.2</span><br><span class="line">设置DNS解析</span><br><span class="line">DNS1 = 114.114.114.114</span><br></pre></td></tr></table></figure></li><li>配置完成后ESC, shift+: , wq保持退出</li><li>配置项如下所示  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">BOOTPROTO = static</span><br><span class="line">ONBOOT = yes</span><br><span class="line">IPADDR = 192.168.31.3</span><br><span class="line">NETMASK = 255.255.255.0</span><br><span class="line">PREFIX = 24</span><br><span class="line">GATEWAY = 192.168.31.2</span><br><span class="line">DNS1 = 114.114.114.114</span><br></pre></td></tr></table></figure></li><li><strong>注 非必要项可以删除 防止干扰  见上上上图</strong> </li><li>配置完成后重启网络</li><li><pre><code class="shell">  systemctl restart network.service  或者  service network restart</code></pre></li><li><em>如发现无法进行重启,直接重启虚拟机,再重启网络服务即可</em></li></ul></li><li><strong>有必要插播的话,主机的所有东西都不用动! 不用动!</strong><ul><li>网路测试<ul><li>虚拟机<ul><li>ping <a href="http://www.baidu.com/">www.baidu.com</a> 网路正常</li></ul></li><li>主机<ul><li>正常上网检查即可</li></ul></li></ul></li><li>主机虚拟机互通测试<ul><li>虚拟机<ul><li>ping 192.168.31.108 有包发送则正常</li></ul></li><li>主机<ul><li>ping 192.168.31.3 收包则正常</li></ul></li></ul></li></ul></li></ul><h3 id="MobaXterm连接虚拟机"><a href="#MobaXterm连接虚拟机" class="headerlink" title="MobaXterm连接虚拟机"></a>MobaXterm连接虚拟机</h3><h6 id="需要虚拟机网络正常"><a href="#需要虚拟机网络正常" class="headerlink" title="需要虚拟机网络正常"></a>需要虚拟机网络正常</h6><ul><li>新建Session 填入IP地址 输入用户名密码即可连接</li><li><img src="/../../img/CentOS7%E6%88%AA%E5%9B%BE/4.png"></li><li><em>出现 Network error: Connection timed out问题</em><ul><li>首先看windows的Vmware的服务是否全是自动开启,若是 看下一步</li><li>找到Windows Defender防火墙 打开设置 关闭所有的防火墙</li><li>返回MobaXterm重新连接</li><li>进入root目录输入 chkconfig iptables off (永久性关闭防火墙)<ul><li>若报错 则先安装services : yum install iptables-services</li></ul></li><li>回到Windows Defender设置,打开所有的防火墙</li><li>若还无法解决<ul><li>检查是否禁用了服务 <ul><li>FLYSVR</li><li>域登录服务</li><li>交互式服务对话框检测服务</li><li>VMware虚拟机网络的动态IP配置服务</li></ul></li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 踩坑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Excel相关操作</title>
      <link href="/2022/07/27/%E5%8D%9A%E5%AE%A2/Excel/"/>
      <url>/2022/07/27/%E5%8D%9A%E5%AE%A2/Excel/</url>
      
        <content type="html"><![CDATA[<h2 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h2><h4 id="第一种-读xls类型的"><a href="#第一种-读xls类型的" class="headerlink" title="第一种 读xls类型的"></a>第一种 读xls类型的</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path = xlrd.open_workbook(<span class="string">&#x27;readxls.xls&#x27;</span>)</span><br><span class="line">sheet1 = path.sheets()[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,sheet1.nrows):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,sheet1.ncols):</span><br><span class="line">        <span class="built_in">print</span>(sheet1.cell(x,y).value)</span><br><span class="line">    </span><br><span class="line">data = [<span class="string">&quot;四&quot;</span>,<span class="number">41</span>,<span class="number">42</span>,<span class="number">43</span>,<span class="number">44</span>,<span class="number">45</span>,<span class="number">46</span>]</span><br><span class="line">wk = xlwt.Workbook()</span><br><span class="line">ws = wk.add_sheet(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(data)):</span><br><span class="line">    ws.write(x,<span class="number">0</span>,data[x])</span><br><span class="line">wk.save(<span class="string">&#x27;wkexcel.xls&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;success&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="第二种-用openpyxl-xlsx类型的"><a href="#第二种-用openpyxl-xlsx类型的" class="headerlink" title="第二种 用openpyxl xlsx类型的"></a>第二种 用openpyxl xlsx类型的</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">workbook = openpyxl.load_workbook(<span class="string">&#x27;read1.xlsx&#x27;</span>)</span><br><span class="line">sheets1 = workbook[<span class="string">&#x27;Sheet1&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,sheets1.max_row):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,sheets1.max_column):</span><br><span class="line">        <span class="built_in">print</span>(sheets1.cell(x, y).value)</span><br><span class="line"></span><br><span class="line">wb = openpyxl.Workbook()</span><br><span class="line">sheet = wb.active</span><br><span class="line">sheet.title = <span class="string">&quot;sheet_new&quot;</span></span><br><span class="line">data = [</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;John Brown1S&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>, </span><br><span class="line">    <span class="string">&#x27;address&#x27;</span>, <span class="string">&#x27;New York No. 1 Lake Park&#x27;</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(data)):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">2</span>):</span><br><span class="line">        sheet.cell(row=x+<span class="number">1</span>,column=y+<span class="number">1</span>,value=<span class="built_in">str</span>(data[x]))</span><br><span class="line">wb.save(<span class="string">&#x27;wirte1.xlsx&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;success&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.read_excel(<span class="string">&quot;read1.xlsx&quot;</span>,header=<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">data1 = &#123;</span><br><span class="line">    <span class="string">&quot;第四行&quot;</span>:[<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>],</span><br><span class="line">    <span class="string">&quot;第五行&quot;</span>:[<span class="number">100</span>,<span class="number">101</span>,<span class="number">102</span>,<span class="number">103</span>],</span><br><span class="line">    <span class="string">&quot;第六行&quot;</span>:[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame</span><br><span class="line">df = DataFrame(data1)</span><br><span class="line">df.to_excel(<span class="string">&quot;writepd.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="读写表："><a href="#读写表：" class="headerlink" title="读写表："></a>读写表：</h3><h4 id="xls格式：xlrd和xlwt"><a href="#xls格式：xlrd和xlwt" class="headerlink" title="xls格式：xlrd和xlwt"></a>xls格式：xlrd和xlwt</h4><ul><li>读：open_workbook  获取表格副本名 然后双层遍历</li><li>print(表名.cell(x,y).value)</li><li>写：xlwt.Workbook  添加副本add_sheet 写入.write(x,y,value) </li><li>保存 save</li></ul><h4 id="xlsx格式：openpyxl"><a href="#xlsx格式：openpyxl" class="headerlink" title="xlsx格式：openpyxl"></a>xlsx格式：openpyxl</h4><ul><li>读：openpyxl.load_workbook 获取表格副本名 双层遍历</li><li>print(表名.cell(x,y).value)</li><li>写：openpyxl.Workbook 激活active 写入sheet.cell(x,y,value)</li></ul><h4 id="xlsl格式：pandas"><a href="#xlsl格式：pandas" class="headerlink" title="xlsl格式：pandas"></a>xlsl格式：pandas</h4><ul><li>读：pandas.read_excel(表名) print(xxx)</li><li>写：DateFrame(数据) to_excel(表名)</li></ul><h2 id="追加"><a href="#追加" class="headerlink" title="追加"></a>追加</h2><h4 id="xlwt追加方式"><a href="#xlwt追加方式" class="headerlink" title="xlwt追加方式"></a>xlwt追加方式</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">addexcel = open_workbook(<span class="string">&#x27;readxls.xls&#x27;</span>)</span><br><span class="line">row = addexcel.sheets()[<span class="number">0</span>].nrows</span><br><span class="line">addcp = copy(addexcel)</span><br><span class="line">table = addcp.get_sheet(<span class="number">0</span>)</span><br><span class="line">Values = [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> Values:</span><br><span class="line">    table.write(row,<span class="number">0</span>,value)</span><br><span class="line">    table.write(row,<span class="number">1</span>,<span class="string">&#x27;haha&#x27;</span>)</span><br><span class="line">    table.write(row,<span class="number">2</span>,<span class="string">&#x27;lala&#x27;</span>)</span><br><span class="line">    row +=<span class="number">1</span></span><br><span class="line">addcp.save(<span class="string">&#x27;readxls.xls&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="openpyxl方式"><a href="#openpyxl方式" class="headerlink" title="openpyxl方式"></a>openpyxl方式</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">workbook = openpyxl.load_workbook(<span class="string">&#x27;read1.xlsx&#x27;</span>)</span><br><span class="line">sheets1 = workbook[<span class="string">&#x27;Sheet1&#x27;</span>]</span><br><span class="line">nrows = sheets1.max_row</span><br><span class="line">ncols = sheets1.max_column</span><br><span class="line"></span><br><span class="line"><span class="comment">#method1</span></span><br><span class="line">sheets1[<span class="string">&quot;A20&quot;</span>] = <span class="string">&quot;新增&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#method2</span></span><br><span class="line">row_data = [<span class="number">800</span>,<span class="number">900</span>]</span><br><span class="line">sheets1.append(row_data)</span><br><span class="line"></span><br><span class="line">row_datas = [[<span class="number">33</span>,<span class="number">44</span>],[<span class="number">55</span>,<span class="number">66</span>]]</span><br><span class="line"><span class="keyword">for</span> data <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(row_datas)):</span><br><span class="line">    sheets1.append(row_datas[data])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;保存成功&quot;</span>)</span><br><span class="line">workbook.save(<span class="string">&quot;read1.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="pandas方式"><a href="#pandas方式" class="headerlink" title="pandas方式"></a>pandas方式</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.read_excel(<span class="string">&quot;read1.xlsx&quot;</span>,header=<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">data1 = &#123;</span><br><span class="line">    <span class="string">&quot;第四行&quot;</span>:[<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>],</span><br><span class="line">    <span class="string">&quot;第五行&quot;</span>:[<span class="number">100</span>,<span class="number">101</span>,<span class="number">102</span>,<span class="number">103</span>],</span><br><span class="line">    <span class="string">&quot;第六行&quot;</span>:[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame</span><br><span class="line">df = DataFrame(data1)</span><br><span class="line">df.to_excel(<span class="string">&quot;writepd.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="追加："><a href="#追加：" class="headerlink" title="追加："></a>追加：</h3><h4 id="xls表格：xlwt形式"><a href="#xls表格：xlwt形式" class="headerlink" title="xls表格：xlwt形式"></a>xls表格：xlwt形式</h4><p>open_workbook(表名).sheet()[0].nrows<br>copy(open_workbook(表名))  get_sheet(0) 获取复制的第一张副本<br>遍历 write(row,0,value)<br>save(表名)</p><h4 id="xlsx表格：openpyxl方式"><a href="#xlsx表格：openpyxl方式" class="headerlink" title="xlsx表格：openpyxl方式"></a>xlsx表格：openpyxl方式</h4><p>openpyxl.load_workbook()<br>sheets1 &#x3D; workbook[副本名]<br>nrows &#x3D; sheets1.max_row<br>ncols &#x3D; sheets1.max_column</p><p>@method<br>sheet【”A20“】 &#x3D; “新增”<br>@method<br>data &#x3D; [800,900]<br>sheets.append(data)<br>workbook.save()</p><h4 id="xlsx格式：pandas方式"><a href="#xlsx格式：pandas方式" class="headerlink" title="xlsx格式：pandas方式"></a>xlsx格式：pandas方式</h4><p>写：DateFrame(数据) to_excel(表名) 实际是写入到另一个表格</p><h2 id="写入图片"><a href="#写入图片" class="headerlink" title="写入图片"></a>写入图片</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">text = &#123;</span><br><span class="line">    <span class="string">&quot;data&quot;</span>: [&#123;</span><br><span class="line">        <span class="string">&quot;issue&quot;</span>: <span class="number">78550</span>,</span><br><span class="line">        <span class="string">&quot;priority&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;assign&quot;</span>: <span class="string">&quot;xxxxxx@mesg.corp.net&quot;</span>,</span><br><span class="line">        <span class="string">&quot;creator&quot;</span>: <span class="string">&quot;xxxxxx@mesg.corp.net&quot;</span>,</span><br><span class="line">        <span class="string">&quot;msgurl&quot;</span>: <span class="string">&quot;https://w.wallhaven.cc/full/rd/wallhaven-rdwjj7.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;state&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;describe&quot;</span>: <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&quot;explain&quot;</span>: <span class="string">&quot;BUG单&quot;</span></span><br><span class="line">    &#125;,]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#创建一个表格并激活一个标题为New的sheet</span></span><br><span class="line">data = text[<span class="string">&quot;data&quot;</span>]</span><br><span class="line">wb = openpyxl.Workbook()</span><br><span class="line">sheet = wb.active</span><br><span class="line">sheet.title = <span class="string">&quot;New&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取字典键 即表格第一行的全部信息</span></span><br><span class="line">keys = []</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> data[<span class="number">0</span>]:</span><br><span class="line">    keys.append(key)</span><br><span class="line"></span><br><span class="line"><span class="comment">#遍历数据</span></span><br><span class="line"><span class="keyword">for</span> lennumber <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">    <span class="comment">#第一行填入标题信息</span></span><br><span class="line">    <span class="keyword">if</span> lennumber==<span class="number">0</span> :</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(keys)):</span><br><span class="line">            sheet.cell(row=<span class="number">1</span>, column=x+<span class="number">1</span>, value=keys[x])</span><br><span class="line">    <span class="comment">#后面的行依次填充</span></span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">8</span>):</span><br><span class="line">        <span class="comment">#跳过图片链接的列另外处理 先将文字全部填充</span></span><br><span class="line">        <span class="keyword">if</span> num!=<span class="number">4</span>:</span><br><span class="line">            sheet.cell(row=lennumber+<span class="number">2</span>, column=num+<span class="number">1</span>, value=data[lennumber][keys[num]])</span><br><span class="line"></span><br><span class="line">wb.save(<span class="string">&quot;test.xlsx&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wb = openpyxl.load_workbook(<span class="string">&quot;test.xlsx&quot;</span>)</span><br><span class="line">sheet = wb[<span class="string">&quot;New&quot;</span>]</span><br><span class="line"><span class="comment">#设置列宽</span></span><br><span class="line">sheet.column_dimensions[<span class="string">&#x27;E&#x27;</span>].width = <span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span> = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(data)):</span><br><span class="line">    url = data[x][<span class="string">&quot;msgurl&quot;</span>]</span><br><span class="line">    response = requests.get(url)</span><br><span class="line"></span><br><span class="line">    tempname = <span class="built_in">str</span>(<span class="built_in">str</span>(<span class="string">&quot;temp&quot;</span>+<span class="built_in">str</span>(x))+<span class="string">&quot;.jpg&quot;</span>)</span><br><span class="line">    <span class="built_in">list</span>.append(tempname)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#下载jpg</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(tempname, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(response.content)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#设置行宽</span></span><br><span class="line">    sheet.row_dimensions[x+<span class="number">2</span>].height = <span class="number">150</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#调整图片尺寸</span></span><br><span class="line">    img_deal = ig.<span class="built_in">open</span>(tempname).resize((<span class="number">200</span>,<span class="number">200</span>),ig.ANTIALIAS)</span><br><span class="line">    img_deal.convert(<span class="string">&#x27;RGB&#x27;</span>).save(tempname)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#向表格指定位置插入图片</span></span><br><span class="line">    img  = Image(tempname)</span><br><span class="line">    imgwhere = <span class="built_in">str</span>(<span class="string">&#x27;E&#x27;</span>+<span class="built_in">str</span>(x+<span class="number">2</span>))</span><br><span class="line">    sheet.add_image(img,imgwhere)</span><br><span class="line"></span><br><span class="line">wb.save(<span class="string">&quot;test.xlsx&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除下载的图片</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line">    os.remove(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;successs&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="response获取图片"><a href="#response获取图片" class="headerlink" title="response获取图片"></a>response获取图片</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">chesimg</span>(<span class="params">content</span>):</span><br><span class="line">    byte_stream = io.BytesIO(content)</span><br><span class="line">    roiImg = Image.<span class="built_in">open</span>(byte_stream)</span><br><span class="line"></span><br><span class="line">    imgBg = io.BytesIO()</span><br><span class="line"></span><br><span class="line">    roiImg.save(imgBg,<span class="built_in">format</span>=<span class="string">&quot;png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    imgBg = imgBg.getvalue()</span><br><span class="line"></span><br><span class="line">    path = <span class="string">r&quot;C:\Users\xuweijin\Desktop\Remind\python_homework\res&quot;</span></span><br><span class="line"></span><br><span class="line">    name = <span class="string">&quot;temp.png&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path=path):</span><br><span class="line">        os.makedirs(path)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path+<span class="string">&quot;\\&quot;</span>+name,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(imgBg)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;success&quot;</span>)</span><br><span class="line"></span><br><span class="line">chesimg(response.content)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>句柄和进程的获取</title>
      <link href="/2022/07/26/%E5%8D%9A%E5%AE%A2/%E5%8F%A5%E6%9F%84%E8%BF%9B%E7%A8%8B%E4%B8%80%E7%AF%87%E6%90%9E%E5%AE%9A/"/>
      <url>/2022/07/26/%E5%8D%9A%E5%AE%A2/%E5%8F%A5%E6%9F%84%E8%BF%9B%E7%A8%8B%E4%B8%80%E7%AF%87%E6%90%9E%E5%AE%9A/</url>
      
        <content type="html"><![CDATA[<h2 id="句柄类"><a href="#句柄类" class="headerlink" title="句柄类"></a>句柄类</h2><h3 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> win32gui</span><br><span class="line"><span class="keyword">import</span> win32con</span><br><span class="line"><span class="keyword">import</span> win32api</span><br></pre></td></tr></table></figure><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul><li><p>获取所有句柄</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">hwnd_title = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_all_hwnd</span>(<span class="params">hwnd, mouse</span>):</span><br><span class="line">    <span class="keyword">if</span> (win32gui.IsWindow(hwnd) <span class="keyword">and</span> win32gui.IsWindowEnabled(hwnd) <span class="keyword">and</span> win32gui.IsWindowVisible(hwnd)):</span><br><span class="line">        hwnd_title.update(&#123;hwnd: win32gui.GetWindowText(hwnd)&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">win32gui.EnumWindows(get_all_hwnd, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> h, t <span class="keyword">in</span> hwnd_title.items():</span><br><span class="line">    <span class="keyword">if</span> t:</span><br><span class="line">        <span class="built_in">print</span>(h, t.encode(<span class="string">&#x27;utf-8&#x27;</span>).decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure></li><li><p>通过标题获取句柄</p><p>  hld &#x3D; win32gui.FindWindow(None,u”VsCode”)</p></li><li><p>通过句柄获取标题</p><p>  title &#x3D; win32gui.GetWindowText(hwnd)</p></li><li><p>通过句柄获取窗口定位</p><p>  left,top,right,bottom &#x3D; win32gui.GetWindowRect(hwnd)</p></li><li><p>设置鼠标位置和左键单击</p><p>  win32api.SetCursorPos([x, y])</p><p>  win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP | win32con.MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0)</p></li><li><p>…</p></li></ul><h2 id="进程-pustil"><a href="#进程-pustil" class="headerlink" title="进程 pustil"></a>进程 pustil</h2><ul><li><p>获取所有得进程</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> psutil.Process_iter([<span class="string">&#x27;pid&#x27;</span>, <span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;username&#x27;</span>]):</span><br><span class="line">    p.info[<span class="string">&#x27;pid&#x27;</span>]</span><br><span class="line">    p.info[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    p.info[<span class="string">&#x27;username&#x27;</span>]</span><br></pre></td></tr></table></figure></li><li><p>获取单个进程信息</p><p>  p&#x3D;psutil.Process(pid)<br>  p.name() p.exe p.status()</p></li><li><p>杀进程</p><p>  os.kill(s.pid,9)</p></li><li><p>查进程存在否</p><p>  psutil.pid_exists(pid)</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VsCode搭建Django</title>
      <link href="/2022/07/25/%E5%8D%9A%E5%AE%A2/VsCode%E6%90%AD%E5%BB%BADjango/"/>
      <url>/2022/07/25/%E5%8D%9A%E5%AE%A2/VsCode%E6%90%AD%E5%BB%BADjango/</url>
      
        <content type="html"><![CDATA[<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><h2 id="安装Django"><a href="#安装Django" class="headerlink" title="安装Django"></a>安装Django</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install django</span><br><span class="line">pip show django</span><br></pre></td></tr></table></figure><p><img src="/../../img/%E6%96%87%E7%AB%A0%E6%88%AA%E5%9B%BE/django%E6%88%AA%E5%9B%BE1.png"></p><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><ol><li>进入项目root目录 打开dos命令行，运行命令创建工程项目<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">django-admin startproject your_django_project</span><br></pre></td></tr></table></figure></li><li>进入到django工程目录下中 cd your_django_project</li><li>通过venv创建python虚拟环境<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python -m venv venv</span><br></pre></td></tr></table></figure>得到一个venv环境<br><img src="/../../img/%E6%96%87%E7%AB%A0%E6%88%AA%E5%9B%BE/dj2.png"><br>将Django复制进该目录Script目录下</li></ol><h2 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h2><p>VsCode中搜索Django插件<br><img src="/../../img/%E6%96%87%E7%AB%A0%E6%88%AA%E5%9B%BE/dj3.png"></p><h2 id="关联环境"><a href="#关联环境" class="headerlink" title="关联环境"></a>关联环境</h2><p>使用VsCode打开之前创建的 your_django_project<br>Shitf+Ctrl+P 选择带有虚拟环境(venv)的解释器<br><img src="/../../img/%E6%96%87%E7%AB%A0%E6%88%AA%E5%9B%BE/dj4.png"></p><h2 id="配置调试"><a href="#配置调试" class="headerlink" title="配置调试"></a>配置调试</h2><p>vscode左侧菜单栏切换到运行和调试，点击创建 launch.json 文件<br>选择python<br><img src="/../../img/%E6%96%87%E7%AB%A0%E6%88%AA%E5%9B%BE/dj5.png"><br>选择Django<br><img src="/../../img/%E6%96%87%E7%AB%A0%E6%88%AA%E5%9B%BE/dj6.png"><br>启动运行即可运行服务<br><img src="/./../../img/%E6%96%87%E7%AB%A0%E6%88%AA%E5%9B%BE/dj7.png"></p><h1 id="manage常用指令"><a href="#manage常用指令" class="headerlink" title="manage常用指令"></a>manage常用指令</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#从数据库删除所有数据</span><br><span class="line">python ./manage.py flush</span><br><span class="line"></span><br><span class="line">#检查创建新的迁移</span><br><span class="line">python ./manage.py makemigrations</span><br><span class="line"></span><br><span class="line">#同步模型状态和迁移</span><br><span class="line">python ./manage.py migrate</span><br><span class="line"></span><br><span class="line">#进入数据库shell模式</span><br><span class="line">python ./manage.py dbshell</span><br><span class="line"></span><br><span class="line">#runserver</span><br><span class="line">python ./manage.py runserver 127.0.0.1:8080</span><br><span class="line"></span><br><span class="line">#startapp</span><br><span class="line">python ./manage.py startapp project_name</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git将本地文件推送到远程仓库</title>
      <link href="/2022/07/25/%E5%8D%9A%E5%AE%A2/git%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
      <url>/2022/07/25/%E5%8D%9A%E5%AE%A2/git%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="使用Git将本地文件提交到远程仓库"><a href="#使用Git将本地文件提交到远程仓库" class="headerlink" title="使用Git将本地文件提交到远程仓库"></a>使用Git将本地文件提交到远程仓库</h2><h3 id="现在要将本地代码推到git远程仓库保存，可以提交和拉取操作"><a href="#现在要将本地代码推到git远程仓库保存，可以提交和拉取操作" class="headerlink" title="现在要将本地代码推到git远程仓库保存，可以提交和拉取操作"></a>现在要将本地代码推到git远程仓库保存，可以提交和拉取操作</h3><ul><li>本地项目已经创建</li><li>git远程仓库已经建(github、gitee都行)</li></ul><h3 id="操作如下："><a href="#操作如下：" class="headerlink" title="操作如下："></a><strong>操作如下</strong>：</h3><ol><li>（先进入项目文件夹）通过命令 git init 把这个目录变成git可以管理的仓库<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure></li><li>把文件添加到版本库中，使用命令 git add . 添加到暂存区里面去，不要忘记后面的小数点“.”，意为添加文件夹下的所有文件<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure></li><li>用命令 git commit告诉Git，把文件提交到仓库。引号内为提交说明<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git commit -m &#x27;initialize the project&#x27;</span><br></pre></td></tr></table></figure></li><li>关联到远程库git remote add origin 你的远程库地址<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git remote add origin https://github.com/FD982459474/project.git</span><br></pre></td></tr></table></figure></li><li>git pull获取远程库与本地同步合并(如果远程库不为空必须做这一步，否则后面的提交会失败)<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git pull --rebase origin master</span><br></pre></td></tr></table></figure></li><li>把本地库的内容推送到远程，使用 git push命令，实际上是把当前分支master推送到远程。执行此命令后会要求输入用户名、密码，验证通过后即开始上传。<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></li><li>git常用操作命令<br><img src="/../../img/%E6%96%87%E7%AB%A0%E6%88%AA%E5%9B%BE/Git%E6%93%8D%E4%BD%9C%E9%9B%86.png"></li></ol>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Utils </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库便捷操作</title>
      <link href="/2022/07/25/%E5%8D%9A%E5%AE%A2/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2022/07/25/%E5%8D%9A%E5%AE%A2/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="数据库的备份和恢复"><a href="#数据库的备份和恢复" class="headerlink" title="数据库的备份和恢复"></a>数据库的备份和恢复</h2><ul><li>备份数据库<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>h主机名  <span class="operator">-</span>P端口 <span class="operator">-</span>u用户名 <span class="operator">-</span>p密码 –database 数据库名 <span class="operator">&gt;</span> 文件名.<span class="keyword">sql</span>; </span><br></pre></td></tr></table></figure></li><li>备份所有数据库<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump –<span class="keyword">all</span><span class="operator">-</span>databases <span class="operator">&gt;</span> allbackupfile.sql;</span><br></pre></td></tr></table></figure></li><li>迁移数据库<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>uusername <span class="operator">-</span>ppassword databasename <span class="operator">|</span> mysql –host<span class="operator">=</span><span class="operator">*</span>.<span class="operator">*</span>.<span class="operator">*</span>.<span class="operator">*</span> <span class="operator">-</span>C databasename;</span><br></pre></td></tr></table></figure></li><li>还原数据库<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql <span class="operator">-</span>hhostname <span class="operator">-</span>uusername <span class="operator">-</span>ppassword databasename <span class="operator">&lt;</span> backupfile.sql;</span><br></pre></td></tr></table></figure></li><li>备份MySQL数据库某个(些)表<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>hhostname <span class="operator">-</span>uusername <span class="operator">-</span>ppassword databasename table1 table2 <span class="operator">&gt;</span> backupfile.sql;</span><br></pre></td></tr></table></figure></li><li>导入sql脚本 mysql&gt;模式下进行 且选择了database<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span>source d:\test.sql;</span><br></pre></td></tr></table></figure></li><li>批量导入(bat方法)<ul><li>创建包含所有sql的文件夹sqlscripts</li><li>同目录下创建txt文件<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">::echo off</span><br><span class="line">@echo off</span><br><span class="line"></span><br><span class="line">:: 指定MySQL安装路径</span><br><span class="line">:: D:</span><br><span class="line">:: cd D:\mysql-8.0.17-winx64\bin</span><br><span class="line"></span><br><span class="line">:: 数据库主机</span><br><span class="line">@set host=localhost</span><br><span class="line">:: 数据库名称</span><br><span class="line">@set db=checklist</span><br><span class="line">:: 用户名</span><br><span class="line">@set userName=root</span><br><span class="line">:: 密码</span><br><span class="line">@set password=root</span><br><span class="line">:: 获取文件夹所在绝对路径</span><br><span class="line">@set basePath=%~dp0</span><br><span class="line">:: 要执行的sql脚本</span><br><span class="line">@set sqlpath=%basePath%\all.sql</span><br><span class="line"></span><br><span class="line">echo 开始执行数据库脚本...</span><br><span class="line"></span><br><span class="line">for %%i in (sqlscripts\*.sql) do (</span><br><span class="line">    echo 正在执行 %%i 请稍后...</span><br><span class="line">    echo set names utf8;&gt;all.sql</span><br><span class="line">    echo source %%i&gt;&gt;all.sql</span><br><span class="line">    :: 连接MySQL数据库并执行sql脚本 -f 脚本执行过程中，出现错误继续执行 --default-character-set指定导入数据的编码（与数据库编码相同）</span><br><span class="line">    mysql -f -h %host% -u %userName% --password=%password% %db% &lt; %sqlpath% --default-character-set=gbk</span><br><span class="line">    echo %%i 执行完毕。</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">del all.sql</span><br><span class="line"></span><br><span class="line">echo 所有脚本执行完毕。</span><br><span class="line"></span><br><span class="line">pause</span><br></pre></td></tr></table></figure></li><li>修改loaclhost,database,userName,password</li><li>以ANSI编码格式保存并修改后缀名为bat</li><li>运行bat文件</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Utils </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pip 踩坑</title>
      <link href="/2022/07/25/%E5%8D%9A%E5%AE%A2/pip/"/>
      <url>/2022/07/25/%E5%8D%9A%E5%AE%A2/pip/</url>
      
        <content type="html"><![CDATA[<h2 id="1-出现pip安装后-显示成功安装了-但是pip-list没找到包"><a href="#1-出现pip安装后-显示成功安装了-但是pip-list没找到包" class="headerlink" title="1.出现pip安装后 显示成功安装了 但是pip list没找到包"></a>1.出现pip安装后 显示成功安装了 但是pip list没找到包</h2><p>  多个环境下 检查是否是安装到其他python的site-packages目录下<br>  检查AppData\Loacl\Roaming 有没有python文件夹 如果有 则删除该文件夹，同时检查用户环境变量Path是不是配置该路径，如有 则删除掉 然后应用</p><h2 id="2-安装时出现了Using-Cache-使用下面指令"><a href="#2-安装时出现了Using-Cache-使用下面指令" class="headerlink" title="2.安装时出现了Using Cache 使用下面指令"></a>2.安装时出现了Using Cache 使用下面指令</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip3 --no-cache-dir install</span><br></pre></td></tr></table></figure><p>  或者直接清理掉Cache</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip cache dir</span><br></pre></td></tr></table></figure><p>  删除得到pip&#x2F;cache文件夹</p><h2 id="3-使用虚拟环境下的pip进行安装时，pip安装了-却找不到装的包在哪里"><a href="#3-使用虚拟环境下的pip进行安装时，pip安装了-却找不到装的包在哪里" class="headerlink" title="3.使用虚拟环境下的pip进行安装时，pip安装了  却找不到装的包在哪里"></a>3.使用虚拟环境下的pip进行安装时，pip安装了  却找不到装的包在哪里</h2><p>  检查系统环境变量，查看虚拟环境的Script目录是否添加到了环境变量<br>  若有多个 检查每个对应的site-packages 看是不是安装到了其他位置，前提是执行了操作1</p><h2 id="4-多环境下pip安装"><a href="#4-多环境下pip安装" class="headerlink" title="4.多环境下pip安装"></a>4.多环境下pip安装</h2><p>  最好安装时，使用pip2 or pip3这样区分 这样很有必要</p><h2 id="5-pip对应版本"><a href="#5-pip对应版本" class="headerlink" title="5.pip对应版本"></a>5.pip对应版本</h2><ul><li>如果系统中只安装Python2，则只能使用pip。</li><li>如果系统中只安装Python3，则可使用pip和pip3，二者等价。</li><li>如果系统中同时安装Python2和Python3，则pip默认给Python2用，pip3指定给Python3用。</li><li>虚拟环境中，若只存在一个python版本，可以认为在用系统中pip和pip3命令都是相同。</li></ul><h2 id="6-pip对应镜像-i"><a href="#6-pip对应镜像-i" class="headerlink" title="6.pip对应镜像 -i"></a>6.pip对应镜像 -i</h2><ul><li>阿里云 :<a href="http://mirrors.aliyun.com/pypi/simple/">http://mirrors.aliyun.com/pypi/simple/</a></li><li>豆瓣 <a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a></li><li>清华大学 <a href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a></li><li>中国科学技术大学 <a href="http://pypi.mirrors.ustc.edu.cn/simple/">http://pypi.mirrors.ustc.edu.cn/simple/</a></li><li>华中科技大学 <a href="http://pypi.hustunique.com/">http://pypi.hustunique.com/</a></li></ul><h2 id="7-pip安装的包正常，但无法导入，灰置显示"><a href="#7-pip安装的包正常，但无法导入，灰置显示" class="headerlink" title="7.pip安装的包正常，但无法导入，灰置显示"></a>7.pip安装的包正常，但无法导入，灰置显示</h2><p>  版本对不上，支持的版本不对，先卸载，然后指定版本安装<br>  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip uninstall page</span><br><span class="line">pip install page==x.x.x</span><br></pre></td></tr></table></figure></p><h2 id="8-pip-install-r-x2F-requirments-txt-其中某个包不能安装"><a href="#8-pip-install-r-x2F-requirments-txt-其中某个包不能安装" class="headerlink" title="8.pip install -r .&#x2F;requirments.txt 其中某个包不能安装"></a>8.pip install -r .&#x2F;requirments.txt 其中某个包不能安装</h2><p>  版本不能用了 把对应报错的版号删了</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 踩坑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码演示</title>
      <link href="/2022/07/24/%E5%8D%9A%E5%AE%A2/%E6%BC%94%E7%A4%BA/"/>
      <url>/2022/07/24/%E5%8D%9A%E5%AE%A2/%E6%BC%94%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">    console.log(&#x27;Hello&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="演示文字"><a href="#演示文字" class="headerlink" title="演示文字"></a>演示文字</h2><p>This is a Demonstration</p><h3 id="演示文字-1"><a href="#演示文字-1" class="headerlink" title="演示文字"></a>演示文字</h3><p>This is a Demonstration</p>]]></content>
      
      
      <categories>
          
          <category> Test </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/07/24/hello-world/"/>
      <url>/2022/07/24/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
